<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: https://yastatic.net;">
    <title>БатутОГО - Детский Игровой Комплекс</title>
    <link rel="stylesheet" href="../node_modules/jquery-ui-dist/jquery-ui.min.css">
    <link rel="stylesheet" href="../dist/style.min.css">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, maximum-scale=1"/>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=bb72970d-611d-4bc9-af81-e472cde0ca84&lang=ru_RU"
            type="text/javascript"></script>
</head>
<body>

<div class="header3">
    <div class="container">
        <nav class="menu2">
            <ul class="menu-items">
                <li class="menu-item2 logo">
                    <a href="#" class="logo-link">
                        <img src="images/logo1.png" class="logo-image" alt="Логотип БатутОГО">
                    </a>
                </li>
                <li class="menu-item2">
                    <a href="#">БЛЮДА</a>
                </li>
                <li class="menu-item2">
                    <a href="../category/index.html">КАТЕГОРИИ</a>
                </li>
                <li class="menu-item2">
                    <a href="../users/index.html">ПОЛЬЗОВАТЕЛИ</a>
                </li>
                <li class="menu-item2">
                    <a href="../reserv/index.html">БРОНЬ</a>
                </li>
                <li class="menu-item2">
                    <a href="../orders/index.html">ЗАКАЗЫ</a>
                </li>
            </ul>
        </nav>
    </div>
</div>

<section class="admin-order">
    <div class="container">
        <div class="admin-order-title">Заказы</div>
        <div class="admin-orders">

            <div class="admin-orders-card">
                <div class="admin-orders-info">
                    <div class="admin-orders-number">#765423156</div>
                    <div class="admin-orders-user">Анастасия</div>
                    <div class="admin-orders-date-time">
                        <div class="admin-orders-date">
                            <div class="admin-orders-date-title">Дата</div>
                            <div class="admin-orders-date-val">02.06.2023</div>
                        </div>
                        <div class="admin-orders-date">
                            <div class="admin-orders-date-title">Время</div>
                            <div class="admin-orders-date-val">12:00</div>
                        </div>
                    </div>
                    <div class="admin-orders-get">Самовывоз</div>
                    <button id="open">открыть</button>
                </div>

                <div class="admin-orders-desc">
                    <div class="admin-orders-addr-title">Адрес доставки</div>
                    <div class="admin-orders-addr">ул. Маяковского, 17</div>
                </div>

                <div class="admin-orders-st-sum">
                    <div class="admin-orders-st">
                        <div class="admin-orders-st-title">Статус заказа</div>
                        <div class="admin-orders-st-desc">Обрабатывается</div>
                    </div>

                    <div class="admin-orders-st">
                        <div class="admin-orders-sum-title">Сумма заказа</div>
                        <div class="admin-orders-sum-desc">790 ₽</div>
                    </div>
                </div>
            </div>

            <div class="admin-orders-card-desc">
                <div class="admin-orders-info">
                    <div class="admin-orders-number">#765423156</div>
                    <div class="admin-orders-user">Анастасия</div>
                    <div class="admin-orders-date-time">
                        <div class="admin-orders-date">
                            <div class="admin-orders-date-title">Дата</div>
                            <div class="admin-orders-date-val">02.06.2023</div>
                        </div>
                        <div class="admin-orders-date">
                            <div class="admin-orders-date-title">Время</div>
                            <div class="admin-orders-date-val">12:00</div>
                        </div>
                    </div>
                    <div class="admin-orders-get">Самовывоз</div>
                </div>

                <div class="admin-orders-desc">
                    <div class="admin-orders-addr-title">Адрес доставки</div>
                    <div class="admin-orders-addr">ул. Маяковского, 17</div>
                </div>

                <div class="admin-orders-comm">
                    <input type="text" placeholder="Комментарий">
                </div>

                <div class="admin-orders-dish">
                    <div class="pers-order-dish">
                        <div class="pers-order-dish-img-title">
                            <img src="images/salads1.png" alt="Цезарь с креветкой">
                            <div class="pers-order-dish-title">Цезарь с креветкой</div>
                        </div>
                        <div class="pers-order-dish-count">1</div>
                        <div class="pers-order-dish-price">310 ₽</div>
                    </div>
                    <div class="pers-order-dish">
                        <div class="pers-order-dish-img-title">
                            <img src="images/icecream2.png" alt="Мороженное креманка">
                            <div class="pers-order-dish-title">Мороженное креманка</div>
                        </div>
                        <div class="pers-order-dish-count">1</div>
                        <div class="pers-order-dish-price">180 ₽</div>
                    </div>
                </div>

                <div class="admin-orders-st-sum">
                    <div class="admin-orders-st">
                        <div class="admin-orders-st-title">Статус заказа</div>
                        <div class="admin-orders-st-desc">Обрабатывается</div>
                        <img id="ed" src="images/ed.png">
                    </div>

                    <div class="admin-orders-st">
                        <div class="admin-orders-sum-title">Сумма заказа</div>
                        <div class="admin-orders-sum-desc">790 ₽</div>
                    </div>
                </div>

                <div class="admin-orders-action">
                    <button id="close">Сохранить</button>
                </div>

            </div>

        </div>
    </div>
</section>

<div class="modal"></div>


<footer class="footer">
    <div class="container">
        <div class="footer-menu">
            <a href="#">Условия Использования</a>
            <a href="#">
                <svg width="104" height="41" viewBox="0 0 104 41" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M53.2125 40.8764C45.9766 40.9716 38.106 40.7812 30.2354 40.3052L24.5 40C23.1293 39.8733 20 39.5 18.8738 39.3848C17.7476 39.2696 14.7473 39.0572 12.717 38.6549C5.73496 37.0681 1.03798 33.2597 0.339777 25.2621C0.022414 21.7711 -0.231477 18.3753 0.339777 14.8843C0.61054 11.6863 1.99983 8.68596 4.26349 6.4107C6.52714 4.13543 9.52031 2.73082 12.717 2.4437C23.1265 0.729936 33.5995 0.158682 44.0725 0L76.9513 0.729936C82.2428 1.00166 87.5054 1.68071 92.6925 2.76106C98.9446 4.03051 103.166 8.85444 103.737 15.3287C104.131 19.0559 104.078 22.817 103.578 26.5316C103.295 28.8346 102.401 31.0201 100.99 32.8615C99.5779 34.7029 97.6994 36.1334 95.5488 37.0046C91.5818 38.7183 87.3608 39.2896 83.1716 39.607L53.3395 40.8129L53.2125 40.8764Z"
                          fill="#7C529E"/>
                    <path d="M26.4256 30.2122C27.8854 30.2122 29.5992 28.8475 30.0752 27.4512C30.5513 26.0548 29.5992 25.547 28.8058 24.9122C28.2028 24.4362 27.5681 24.0554 26.9968 23.6111C25.7591 22.7224 24.6166 22.7224 23.7597 24.1188C23.2837 24.944 22.5537 24.944 21.8555 24.5949C19.8244 23.6428 18.2058 22.2464 17.222 20.1518C16.7777 19.2314 16.7777 18.3428 17.7298 17.7081C18.2058 17.3907 18.7771 16.9782 18.6819 16.1213C18.5867 15.1692 16.2382 11.8051 15.2861 11.4878C14.8998 11.3291 14.4665 11.3291 14.0801 11.4878C11.8586 12.2177 10.9065 14.0902 11.7951 16.1848C14.3975 22.6907 19.0945 27.1338 25.4417 29.8948C25.8543 30.0535 26.2669 30.0535 26.3938 30.1487L26.4256 30.2122ZM21.7286 11.1704C21.4112 11.2656 20.6813 10.9165 20.6813 11.6465C20.6813 12.1225 21.2525 12.059 21.6334 12.1225C23.6147 12.1803 25.4954 13.0082 26.8762 14.4304C28.2569 15.8526 29.0288 17.757 29.0279 19.7392C29.1231 20.1518 28.9327 20.7865 29.504 20.8817C30.0752 20.9769 29.98 20.247 29.98 19.8344C29.9375 17.6115 29.0632 15.4853 27.5297 13.8755C25.9963 12.2657 23.9151 11.2891 21.6968 11.1387L21.7286 11.1704ZM55.3691 20.7548V13.868C55.3691 12.5033 55.8451 11.3291 57.4002 11.3291C58.9553 11.3291 59.3044 12.3764 59.3044 13.7728V14.6614C59.3044 16.756 59.3044 16.756 61.2086 16.2482C62.4409 15.8242 63.7851 15.8606 64.9927 16.3506C66.2002 16.8406 67.1896 17.7512 67.778 18.9141C69.3648 21.8338 69.4918 24.7536 67.778 27.6733C66.0643 30.5931 62.8271 31.4817 59.9074 29.7044C59.4314 29.3871 59.2727 29.2284 58.8601 29.7996C58.2888 30.6248 57.4002 30.6883 56.5116 30.2757C55.623 29.8631 55.3691 29.0697 55.3691 28.0541V20.7548ZM65.017 23.2937C65.017 21.0721 63.811 19.4853 62.1607 19.3901C60.5104 19.2949 59.1457 20.85 59.1457 23.0398C59.1457 25.2296 60.3517 26.8482 62.002 26.9434C63.6523 27.0386 65.017 25.4835 65.017 23.2937ZM40.7387 23.3889L44.1344 14.1854L44.7057 12.7255C45.1817 11.583 45.9751 10.9483 47.3081 11.456C48.641 11.9638 48.8949 13.0429 48.4506 14.3123L44.4835 24.6266L42.7698 28.9428C42.4524 29.7679 41.8812 30.4026 40.8656 30.5296C39.7231 30.5296 39.1518 29.8948 38.8345 28.9428L33.1219 14.5027C32.6459 13.2333 32.868 12.059 34.3279 11.583C35.7878 11.1069 36.4225 11.9956 36.9303 13.1698L40.6752 23.4841L40.7387 23.3889ZM77.8702 24.5314H74.3792C73.4906 24.5314 73.4271 24.944 73.8079 25.5787C74.5379 26.9434 76.6642 27.4829 78.4414 26.8482C79.0762 26.5943 79.6474 26.2769 80.3456 25.9595C81.2342 25.4835 82.0594 25.547 82.6306 26.4356C83.2019 27.3242 82.8845 28.2128 82.0594 28.7841C79.457 30.5613 76.6642 31.1326 73.7127 29.9266C70.7612 28.7206 69.6505 26.2769 69.6505 23.262C69.5553 19.3584 72.2528 16.28 75.7438 15.8674C79.2348 15.4548 82.4719 17.962 83.1384 21.6434C83.551 23.6745 82.9797 24.4045 80.8534 24.4997L77.8702 24.5314ZM76.1564 21.929C76.4738 21.929 76.8864 22.0242 77.2037 21.929C77.8384 21.8338 78.7905 22.3416 78.9809 21.6117C79.2348 20.6596 78.4097 19.8979 77.6163 19.5171C76.4738 18.9458 75.3947 19.041 74.4426 19.9296C73.9666 20.4057 73.3954 20.9769 73.6175 21.7069C73.8397 22.4368 74.5696 21.9608 75.2043 22.0242C75.5217 22.0242 75.8391 21.929 76.1564 21.929Z"
                          fill="white"/>
                    <path d="M26.4269 30.2127C26.173 30.0858 25.8557 30.0858 25.4431 29.9588C19.0006 27.2295 14.3988 22.7229 11.7965 16.2487C10.9078 14.0272 11.7965 12.2817 14.0815 11.5517C14.4678 11.393 14.9011 11.393 15.2875 11.5517C16.2396 11.8691 18.6198 15.2014 18.6833 16.1852C18.7785 16.9152 18.2072 17.3277 17.7312 17.7721C16.7791 18.4068 16.7791 19.2319 17.1599 20.2158C18.0636 22.2532 19.7257 23.8584 21.7934 24.6906C22.5234 25.0079 23.2533 25.0079 23.6976 24.2145C24.5862 22.8499 25.7287 22.9451 26.9347 23.7385C27.5597 24.1258 28.1539 24.5608 28.7119 25.0397C29.5371 25.6744 30.4892 26.1822 29.9814 27.5786C29.4736 28.975 27.7598 30.3396 26.3317 30.3396L26.4269 30.2127ZM84.441 22.9768V18.1212C84.441 17.2325 84.7583 16.5343 85.5835 16.217C86.4086 15.8996 87.3607 15.8996 87.932 16.6295C88.5032 17.3595 88.6619 17.0421 89.0745 16.6295C89.6457 16.1535 90.3439 15.8996 91.2008 15.9948C92.0577 16.09 92.6607 16.6295 92.7876 17.5816C92.9146 18.5337 92.6289 19.1685 91.899 19.3589C88.5667 20.184 88.0906 22.4373 88.408 25.3888C88.4983 26.4151 88.4663 27.4485 88.3128 28.4672C88.1541 29.6732 87.4242 30.3714 86.1865 30.3714C84.9487 30.3714 84.4727 29.4828 84.4092 28.3403V23.1355L84.441 22.9768ZM49.8483 23.6115V18.978C49.8483 17.7086 50.4196 16.8834 51.7525 16.8834C53.0854 16.8834 53.6567 17.7086 53.6567 18.9146V28.2451C53.6567 29.5145 53.022 30.3714 51.7525 30.3714C50.4831 30.3714 49.8483 29.4828 49.8483 28.1498V23.6115ZM21.6982 11.1074C23.9164 11.2579 25.9976 12.2344 27.5311 13.8442C29.0646 15.4541 29.9388 17.5803 29.9814 19.8032C29.9814 20.2158 30.1401 20.8505 29.5053 20.8505C28.8706 20.8505 29.0293 20.2158 29.0293 19.708C29.0301 17.7258 28.2582 15.8214 26.8775 14.3992C25.4968 12.977 23.6161 12.1491 21.6347 12.0912C21.2222 11.996 20.6826 12.0912 20.6826 11.6152C20.7779 10.8853 21.4126 11.2026 21.7299 11.1392L21.6982 11.1074ZM54.0058 13.4559C53.8471 14.6619 53.2759 15.487 51.9747 15.5505C50.6735 15.614 49.7531 14.6619 49.7531 13.4559C49.7531 12.2499 50.8004 11.1709 51.9747 11.2344C53.1489 11.2978 53.8789 12.123 54.0058 13.4559Z"
                          fill="white"/>
                    <path d="M27.7284 18.9777C27.6332 19.2951 27.8871 19.8663 27.3159 19.9298C26.5859 20.025 26.7446 19.3586 26.6811 18.9777C26.2051 16.1215 25.2213 15.0742 22.3015 14.4394C21.889 14.3442 21.2542 14.4394 21.3494 13.8047C21.4446 13.17 22.0794 13.3921 22.4919 13.4873C25.4117 13.8047 27.7602 16.2484 27.7602 19.0095L27.7284 18.9777Z"
                          fill="white"/>
                    <path d="M25.5375 18.5018C25.5375 18.8192 25.5375 19.2318 25.0614 19.327C24.7441 19.327 24.5854 19.0731 24.4902 18.7557C24.395 17.5497 23.7602 16.8833 22.4908 16.7563C22.1734 16.6611 21.7926 16.5659 21.9513 16.1216C22.0465 15.8042 22.3638 15.8042 22.6812 15.8042C24.0459 15.709 25.5375 17.1689 25.5375 18.5653V18.5018Z"
                          fill="white"/>
                </svg>

            </a>
            <a href="#">Политика Кондифициальности</a>
            <a href="../admin/index.html">Админ</a>
        </div>
    </div>
</footer>


<script type="text/javascript" src="../node_modules/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="../node_modules/jquery-ui-dist/jquery-ui.min.js"></script>
<script src="scripts/script.js"></script>
<script src="scripts/maps.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
        const token = localStorage.getItem('adminToken');
        
            if (!token) {
                window.location.href = '/admin';
                return;
            }

            try {
                // Проверяем авторизацию
                const response = await fetch('http://localhost:5000/api/admin/dashboard', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
                });

                if (!response.ok) {
                throw new Error('Not authorized');
                }

                const data = await response.json();
                
                // Отображаем данные
                document.getElementById('welcome-message').textContent = data.message;
                document.getElementById('users-count').textContent = data.stats.users;
                document.getElementById('products-count').textContent = data.stats.products;
                document.getElementById('orders-count').textContent = data.stats.orders;

            } catch (error) {
                console.error('Auth error:', error);
                localStorage.removeItem('adminToken');
                window.location.href = '/admin';
            }

            // Кнопка выхода
            document.getElementById('logout-btn').addEventListener('click', () => {
                localStorage.removeItem('adminToken');
                window.location.href = '/admin';
            });
        });
    </script>

</body>
</html>